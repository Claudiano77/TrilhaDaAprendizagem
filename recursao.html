<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RecursÃ£o - Trilha Da Aprendizagem</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="app" class="gradient-bg min-h-screen p-6"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    function RecursionModule() {
      const [stage, setStage] = useState('intro');
      const [answer, setAnswer] = useState('');

      const checkAnswer = () => {
        if (answer === '6' || answer === 'seis') {
          setStage('success');
          const completed = JSON.parse(localStorage.getItem('completed-modules') || '[]');
          if (!completed.includes('recursion')) {
            completed.push('recursion');
            localStorage.setItem('completed-modules', JSON.stringify(completed));
          }
        } else {
          alert('âŒ Pense: fatorial(3) = 3 Ã— 2 Ã— 1');
        }
      };

      if (stage === 'intro') {
        return (
          <div className="max-w-3xl mx-auto card-glass rounded-3xl p-8 mt-12">
            <button onClick={() => window.location.href = 'menu.html'} className="mb-6 text-purple-200 hover:text-white">â† Voltar</button>
            <div className="text-center mb-8">
              <div className="text-6xl mb-4">ğŸª</div>
              <h2 className="text-4xl font-bold text-white mb-4">RecursÃ£o: O Espelho Infinito</h2>
            </div>
            <div className="text-purple-100 space-y-4 mb-8">
              <p className="text-lg"><strong className="text-cyan-400">O que Ã© recursÃ£o?</strong></p>
              <p>JÃ¡ ficou entre dois espelhos e viu sua imagem se repetindo infinitamente? ğŸª</p>
              <p><strong className="text-yellow-400">RecursÃ£o</strong> Ã© quando uma funÃ§Ã£o chama ela mesma!</p>
              <p>Parece mÃ¡gica, mas Ã© muito Ãºtil para resolver certos problemas.</p>
              <div className="bg-white/10 rounded-lg p-4 text-center mb-4">
                <p className="text-2xl mb-2">ğŸ­</p>
                <p><strong>Exemplo:</strong> Contar de 5 atÃ© 1</p>
                <p className="mt-2">5... 4... 3... 2... 1... ğŸš€</p>
              </div>
              <div className="code-block">
                funÃ§Ã£o contarRegressiva(n) {'{'}
                <br />&nbsp;&nbsp;SE (n === 0) {'{'}
                <br />&nbsp;&nbsp;&nbsp;&nbsp;mostrar("ğŸš€")
                <br />&nbsp;&nbsp;&nbsp;&nbsp;retornar
                <br />&nbsp;&nbsp;{'}'}
                <br />&nbsp;&nbsp;mostrar(n)
                <br />&nbsp;&nbsp;contarRegressiva(n - 1) // Chama ela mesma! ğŸ”„
                <br />{'}'}
              </div>
              <p className="text-cyan-300"><strong>Partes importantes:</strong></p>
              <ul className="ml-6 space-y-2">
                <li>ğŸ›‘ <strong>Caso base:</strong> quando parar (senÃ£o fica infinito!)</li>
                <li>ğŸ”„ <strong>Chamada recursiva:</strong> funÃ§Ã£o chama ela mesma</li>
                <li>ğŸ“‰ <strong>ProgressÃ£o:</strong> se aproximar do caso base</li>
              </ul>
              <p className="text-yellow-300">âš ï¸ <strong>Importante:</strong> Sempre precisa de uma condiÃ§Ã£o de parada!</p>
            </div>
            <button onClick={() => setStage('challenge')} className="btn-primary text-white w-full py-4 text-lg rounded-xl font-bold">
              Aceitar Desafio ğŸš€
            </button>
          </div>
        );
      }

      if (stage === 'challenge') {
        return (
          <div className="max-w-4xl mx-auto card-glass rounded-3xl p-8 mt-12">
            <button onClick={() => window.location.href = 'menu.html'} className="mb-6 text-purple-200 hover:text-white">â† Voltar</button>
            <div className="text-center mb-8">
              <div className="text-5xl mb-3">ğŸ§®</div>
              <h2 className="text-3xl font-bold text-white mb-2">Calcule o Fatorial</h2>
            </div>
            <div className="bg-white/10 rounded-xl p-6 mb-6">
              <p className="text-purple-200 mb-4 text-lg">Dada a funÃ§Ã£o recursiva:</p>
              <div className="code-block text-lg mb-4">
                funÃ§Ã£o fatorial(n) {'{'}
                <br />&nbsp;&nbsp;SE (n === 1) {'{'}
                <br />&nbsp;&nbsp;&nbsp;&nbsp;retornar 1
                <br />&nbsp;&nbsp;{'}'}
                <br />&nbsp;&nbsp;retornar n * fatorial(n - 1)
                <br />{'}'}
              </div>
              <p className="text-purple-200 mb-2">Qual o resultado de:</p>
              <div className="code-block text-xl mb-4 text-center">
                fatorial(3)
              </div>
              <p className="text-purple-300 text-sm mb-4">
                ğŸ’¡ Dica: fatorial(3) = 3 Ã— fatorial(2) = 3 Ã— 2 Ã— fatorial(1) = 3 Ã— 2 Ã— 1
              </p>
              <input
                type="text"
                value={answer}
                onChange={(e) => setAnswer(e.target.value)}
                className="bg-white/20 text-white px-6 py-3 rounded-lg w-full text-center text-2xl"
                placeholder="Digite o resultado"
              />
            </div>
            <button onClick={checkAnswer} className="btn-primary text-white w-full py-4 rounded-xl font-semibold">
              âœ… Verificar
            </button>
          </div>
        );
      }

      return (
        <div className="max-w-2xl mx-auto card-glass rounded-3xl p-8 mt-12 text-center">
          <div className="text-8xl mb-6">ğŸ†</div>
          <h2 className="text-4xl font-bold text-white mb-4">ParabÃ©ns, Mestre!</h2>
          <p className="text-xl text-purple-200 mb-4">VocÃª completou TODAS as missÃµes! ğŸ‰</p>
          <p className="text-lg text-purple-300 mb-8">
            RecursÃ£o Ã© um conceito avanÃ§ado e vocÃª dominou! ğŸª
          </p>
          <div className="bg-white/10 rounded-lg p-6 mb-8 text-left">
            <h3 className="text-2xl font-bold text-cyan-400 mb-4 text-center">ğŸ“š Aprendizado:</h3>
            <ul className="text-purple-100 space-y-3">
              <li>âœ“ RecursÃ£o Ã© quando funÃ§Ã£o chama ela mesma</li>
              <li>âœ“ Precisa sempre de um caso base (parada)</li>
              <li>âœ“ Ãštil para problemas que se repetem em menor escala</li>
              <li>âœ“ Exemplos: fatorial, Fibonacci, Ã¡rvores</li>
            </ul>
          </div>
          <div className="bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl p-6 mb-8">
            <p className="text-2xl font-bold text-white mb-2">ğŸŒŸ Conquista Desbloqueada!</p>
            <p className="text-white">Programador Espacial Completo</p>
          </div>
          <button onClick={() => window.location.href = 'menu.html'} className="btn-primary text-white px-8 py-4 rounded-xl font-bold">
            Ver Todas as Conquistas ğŸ—ºï¸
          </button>
          <div class="mt-10 flex flex-wrap justify-center gap-4">
            <a href="index.html"
              class="btn-primary text-white px-12 py-5 text-xl rounded-xl font-bold inline-block animate-pulse-glow flex-grow md:flex-grow-0 md:w-auto">
              â–¶ Ir para Home
            </a>

            <a href="https://jogoeducativo.resetprint.com.br/TrilhaDaAprendizagem.apk" download
              class="bg-green-600 hover:bg-green-700 text-white px-12 py-4 text-xl rounded-xl font-bold inline-block transition-all duration-300 flex-grow md:flex-grow-0 md:w-auto">
              â¬‡ï¸ Baixar APK para Android
            </a>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<RecursionModule />);
  </script>
</body>

</html>